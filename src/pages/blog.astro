---
import type { MarkdownInstance } from "astro";
import BlogArticle from "../components/BlogArticle.astro";
import Header from "../components/Header.astro";
import { WEBSITE_TITLE } from "../constants";
import "../styles/global.css";
import type { PostFrontmatter } from "../interfaces/post-frontmatter";

// Get a list of post from /src/pages/blog/
const posts = Object.values(
  import.meta.glob<MarkdownInstance<PostFrontmatter>>("../pages/blog/*.md", {
    eager: true,
  }),
);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Blog | {WEBSITE_TITLE}</title>
  </head>
  <body class="max-w-3xl mx-auto px-4">
    <Header />
    <main class="mt-10">
      <h2 class="text-3xl font-bold">Blog</h2>
      <section class="mt-8 grid gap-6">
        <h3 class="text-xl">Latest Posts</h3>
        {posts.map((post) => <BlogArticle {post} />)}
      </section>
    </main>
  </body>
</html>
